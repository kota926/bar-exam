FROM node:16.13.1-alpine3.14

ARG EMAIL_HOST
ARG EMAIL_PORT
ARG EMAIL_ADDRESS
ARG EMAIL_PASSWORD
ARG FRONTEND_URL

ENV EMAIL_HOST=${EMAIL_HOST} \
  EMAIL_PORT=${EMAIL_PORT} \
  EMAIL_ADDRESS=${EMAIL_ADDRESS} \
  EMAIL_PASSWORD=${EMAIL_PASSWORD} \
  FRONTEND_URL=${FRONTEND_URL}

WORKDIR /node

RUN apk update

COPY ./api/package*.json ./

RUN npm install

EXPOSE 8080

CMD npm run dev